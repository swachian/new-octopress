
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hegel2011的博客</title>
  <meta name="author" content="Hegel 2011">

  
  <meta name="description" content="Braces and do/end are completely swappable—almost all the time. They have different precedence. It’s not often that anyone comes across what this &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://octopresszhangyu.herokuapp.com/blog/page/22/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Hegel2011的博客" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Hegel2011的博客</a></h1>
  
    <h2>读书 - 工作 - 生活 - 笔记</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:octopresszhangyu.herokuapp.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">关于自己</a></li>
  <li><a href="/blog/2015/02/20/to-read-list/">To-Read</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/21/braces-and-do-end/">Braces 和 Do End</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-21T10:12:00+08:00" pubdate data-updated="true">Mar 21<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Braces and do/end are completely swappable—almost all the time. They have different precedence. It’s not often that anyone comes across what this means in practice.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">outer</span> <span class="n">inner</span> <span class="p">{</span><span class="o">|</span><span class="n">where</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">where</span><span class="si">}</span><span class="s2"> called me&quot;</span><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># &quot;inner called me&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">outer</span> <span class="n">inner</span> <span class="k">do</span> <span class="o">|</span><span class="n">where</span><span class="o">|</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">where</span><span class="si">}</span><span class="s2"> called me&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># &quot;outer called me&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>区别在于block属于谁，是前一个（outer）还是后一个（inner）。</p>

<p>类似的例子还有高见龙的：
http://blog.eddie.com.tw/2011/06/03/do-end-vs-braces/</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">my_array</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="nb">p</span> <span class="n">my_array</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span>
</span><span class='line'>  <span class="n">item</span> <span class="o">*</span> <span class="mi">2</span>  <span class="c1"># 得到[2, 4, 6, 8, 10]</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">p</span> <span class="n">my_array</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span>
</span><span class='line'>  <span class="n">item</span> <span class="o">*</span> <span class="mi">2</span>  <span class="c1"># 得到[1, 2, 3, 4, 5]</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>用braces的，因为block属于my_array.map，所以得到的是double的数据。<br/>
但是，下一个里面block却属于p了，于是只是输出了my_array的内容。<br/>
总结起来，就是braces的顺序性更高，拥有更领先的结合能力。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/20/no-sql-databases-notes/">NoSql Databases Notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-20T21:35:00+08:00" pubdate data-updated="true">Mar 20<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>部门决定在一个日志数据分析系统中不使用oracle或者mysql，于是开始寻找非关系型数据库的替代品。核心需求有以下几个：</p>

<ul>
<li>大数据量写入，一小时10G</li>
<li>数据量极大的查询</li>
<li>并发数不大，即写入和读取都不是高并发的</li>
</ul>


<p>发现此类数据库普遍从3年前开始流行，主要实现这些数据库的编程语言是下面这些，其实从中也可以看出各种库所擅长的内容，有些强项在存储，有些在路由，即分布式。</p>

<ul>
<li>C

<ul>
<li>MongoDB　 (文档存储)</li>
<li>Redis (key-value)</li>
</ul>
</li>
<li>Erlang &amp; C （erlang管路由，c管数据存储的结构）

<ul>
<li>Riak (key-value)</li>
<li>CouchDB (文档存储)</li>
<li>Membase</li>
</ul>
</li>
<li>java (分布式为主，路由功能和存储均不错)

<ul>
<li>Cassandra [kə&#8217;sændrə]</li>
<li>HBase</li>
<li>Neo4j</li>
<li>SenseiDB (from <a href="http://www.infoq.com/cn/news/2012/03/senseidb-1-0-0?utm_source=bshare&amp;utm_campaign=bshare&amp;utm_medium=sinaminiblog&amp;bsh_bid=85617203">LinkedIn</a>)</li>
</ul>
</li>
</ul>


<p>参考资料:<br/>
<a href="http://blog.serverdensity.com/2011/07/21/mongodb-vs-cassandra">http://blog.serverdensity.com/2011/07/21/mongodb-vs-cassandra</a><br/>
<a href="http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis">http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis</a><br/>
<a href="http://blog.evanweaver.com/2009/07/06/up-and-running-with-cassandra">http://blog.evanweaver.com/2009/07/06/up-and-running-with-cassandra</a>    <br/>
<a href="http://articles.businessinsider.com/2009-11-06/tech/30063107_1_database-stores-documents-hot-backup/2">http://articles.businessinsider.com/2009-11-06/tech/30063107_1_database-stores-documents-hot-backup/2</a></p>

<h1><a href="http://www.mongodb.org/">Mongodb</a></h1>

<p>保证海量数据存储的同时，具有良好的查询性能。<br/>
Schema Free</p>

<p>Mongodb总体介绍</p>

<div style="width:425px" id="__ss_9209804"> <strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/ChrisEdwards357/introduction-to-mongodb-9209804" title="Introduction to MongoDB - Austin Code Camp 2011" target="_blank">Introduction to MongoDB - Austin Code Camp 2011</a></strong> <iframe src="http://www.slideshare.net/slideshow/embed_code/9209804" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe> <div style="padding:5px 0 12px"> View more <a href="http://www.slideshare.net/" target="_blank">presentations</a> from <a href="http://www.slideshare.net/ChrisEdwards357" target="_blank">Chris Edwards</a> </div> </div>


<h3>安装、建库、索引与备份</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># 下载解压</span>
</span><span class='line'>wget http://downloads.mongodb.org/src/mongodb-linux-x86_64-2.0.4.tgz
</span><span class='line'>tar xzf mongodb-src-r2.0.4.tar.gz
</span><span class='line'>
</span><span class='line'><span class="c"># 创建数据目录</span>
</span><span class='line'>mkdir -p /data/db
</span><span class='line'>
</span><span class='line'><span class="c">#启动</span>
</span><span class='line'>./mongodb-xxxxxxx/bin/mongod
</span><span class='line'>
</span><span class='line'><span class="c">#shell访问</span>
</span><span class='line'>./mongodb-xxxxxxx/bin/mongo
</span></code></pre></td></tr></table></div></figure>


<p>mongodb可以不事先建schema和表，会在第一次插入数据时自动创建</p>

<p>mongodump 用于备份</p>

<h3>开发工具及使用方式</h3>

<p>mongodb shell是基于js的语法</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt; use mydb
</span><span class='line'>&gt; show dbs
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="http://www.mongodb.org/display/DOCS/Java+Tutorial">Java</a><br/>
<div style="width:425px" id="__ss_3924691"> <strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/ecspike/java-development-with-mongodb" title="Java development with MongoDB" target="_blank">Java development with MongoDB</a></strong> <iframe src="http://www.slideshare.net/slideshow/embed_code/3924691" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe> <div style="padding:5px 0 12px"> Mophia( a lightweight type-safe library for mapping Java objects to/from MongoDB)值得使用</div> </div></li>
<li><a href="http://www.mongodb.org/display/DOCS/Ruby+Language+Center">Ruby</a></li>
<li><a href="http://www.mongodb.org/display/DOCS/C+Language+Center">C</a></li>
</ul>


<h3>数据模型</h3>

<ul>
<li>database</li>
<li>collection = table</li>
<li>document = row</li>
<li>field = column</li>
<li>index</li>
</ul>


<h3>生产环境配置要点(部署)</h3>

<ul>
<li>Linux File Systems</li>
</ul>


<p>MongoDB uses large files for storing data, and preallocates these. These filesystems seem to work well:</p>

<p>ext4 ( kernel version >= 2.6.23 )
xfs ( kernel version >= 2.6.25 )</p>

<ul>
<li>NUMA (一种多核cpu的内存绑定结构，同mongodb和mysql的兼容都不好)</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>numactl --interleave<span class="o">=</span>all /home/mongodb/mongodb-linux-x86_64-2.0.4/bin/mongod --fork --logpath<span class="o">=</span>/data/log/log
</span><span class='line'><span class="nb">echo </span>0 &gt; /proc/sys/vm/zone_reclaim_mode
</span><span class='line'>
</span><span class='line'><span class="nb">kill</span> -2 <span class="o">{</span>proccess_id<span class="o">}</span> <span class="c"># kill -2 = ^C</span>
</span></code></pre></td></tr></table></div></figure>


<h3>监控</h3>

<h1><a href="http://cassandra.apache.org/">Cassandra</a></h1>

<h3>开发工具的支持</h3>

<p>使用<a href="http://thrift.apache.org/">Thrift</a>作为支持多语言的开发工具。它本身也是facebook开源出来的东西。</p>

<h3>安装与教程</h3>

<ol>
<li><a href="http://wiki.apache.org/cassandra/GettingStarted">安装GettingStarted</a>，是安装、配置、启动的上手指南，类似启动一个tomcat；</li>
<li><a href="http://wiki.apache.org/cassandra/CassandraCli">command line 基础</a>, 包含了基本的建表、索引等实例；</li>
<li><a href="http://pablete.org/2009/11/cassandra-and-ruby/">Cassandra for Rails的ppt</a><br/>
<div style="width:480px;text-align:left" id="__ss_2834738">
 <a style="font:14px Helvetica,Arial,Sans-serif;display:block;margin:12px 0 3px 0;text-decoration:underline;" href="http://www.slideshare.net/pablete/cassandra-for-rails" title="Cassandra for Rails">Cassandra for Rails</a>
 <object style="margin:0px" width="480" height="355">
   <param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=cassandrarails2009-100105132552-phpapp01&stripped_title=cassandra-for-rails" />
   <param name="allowFullScreen" value="true"/>
   <param name="allowScriptAccess" value="always"/>
   <embed src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=cassandrarails2009-100105132552-phpapp01&stripped_title=cassandra-for-rails" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="355"></embed>
 </object>
</div></li>
</ol>


<h3>其他优秀特性：</h3>

<ul>
<li>比key-value多，比Mongodb做的少。</li>
<li>Range queries</li>
<li>List datastructures , for per-user indexex</li>
<li>Distributed writes</li>
<li>cluster里可以指定写的node的数量W，和读的node数量R，以此来实现整个node</li>
</ul>


<h3>生产cluster搭配要点:</h3>

<ul>
<li>硬件

<ul>
<li>不需要raid，可以多个节点，即便在同一台机器上，同时运行。</li>
<li>16GB的内存</li>
</ul>
</li>
<li>配置

<ul>
<li>16GB的内存下，配3个节点，Jvm heap使用4GB</li>
</ul>
</li>
</ul>


<p>在/var/lib 下存放data， log， 和  saved_caches</p>

<h3>数据模型的概念</h3>

<ul>
<li>keyspace = schema;<br/>
keyspace仅仅是用来决定replication的次数，而不要求所有的内容都关联在一个schema中。</li>
<li>column family = table<br/>
  由row key +　Columns组成，key可以是自然key也可以是uuid之类的key<br/>
column 由name, value 和timstamp组成，其中value可以为空
key默认就有primary index</li>
<li>特殊的column<br/>
Expiring 可以写入过期时间，用于消息失效之类的应用<br/>
Count 技术的事务性有Cassandra自己保持<br/>
Super  其value是(super) columns的集合，但是该value的全部内容要序列化</li>
<li>对value索引<br/>
   即二级索引，主要起类似位图索引的作用</li>
</ul>


<p><a href="http://www.datastax.com/docs/0.7/data_model/twissandra">一个Twissandra 使用cassandra的例子</a></p>

<h3>Cassandra 小结</h3>

<p>目前分析下来，倾向于使用Cassandra. 理由是，极致的可扩展性，是可以水平扩展的数据库；Java编写，利于改造利用；开发者在去facebook前，也是Amazon Dynamo的开发者；
已知的已经有300TB使用400台服务器的案例。<br/>
twitter的人写的架设材料 http://blog.evanweaver.com/2009/07/06/up-and-running-with-cassandra/<br/>
但其缺点是过于虚拟化以及理想化，所以实际应用中并不是很稳定，digg和twitter都面临骑虎难下的局面。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/13/jiejifenchen/">阶级分层</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-13T22:05:00+08:00" pubdate data-updated="true">Mar 13<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>以中国人实际的概念而言，所谓封建社会 就是  <strong>地富</strong> 社会。<br/>
知识分子也开始装老粗，因为农民思维农民习气受到推崇。因为彼时是战斗阶段，农民是地位最高的一个阶层。<br/>
阶级出身论是中共革命最重要的组织原则，也是思想原则。在革命年代有过重要贡献。这和员工治理有很多相通的地方。但是公司怎么折腾明显是私人的事情。一个国家都这样，就必然要出现问题。</p>

<p>苏共也始终对‘<strong>农民化</strong>’的中共党员问题‘忧虑’。于是此后工人阶级的地位迅速上升。因为他们代表着先进。<br/>
工人阶级之后是农民阶级。对农民来说，实行城乡二元结构，制止“自发资本主义倾向”，使农民走集体化道路。政治地位高，经济地位低，因为农民的生产工具不先进，所以不是先进性代表。<br/>
以上二者中的一部分又构成“工农子弟兵”，即军人。<br/>
商、学是暧昧阶层。</p>

<p>谁说毛主席不懂经济，他用金钱来剥夺城市资本家和知识分子的政治地位，对底层不纯分子则辅之以经济收入限制。不提高农民生活水平也有可以继续全盘控制的意思在里面。毕竟经济地位一旦提高，就不再听党的话了。<br/>
“过高的生活水平已使一些工人孵化起来，大隆机器厂工人不愿听共产主义的道理。”使人民保持贫穷，靠命令才更能运行社会。</p>

<p>敌情过分估计导致的纯化观。<br/>
57年后，家庭出生和思想纯正开始两者结合，不单看背景还要看当前的‘思想状态’。<br/>
但这也使得区分很容易出现乾坤大挪移的特点，比如老干部也会突然被划进来。这样就变成所有的阶层都没有安全感。也就是到了这个时候以后，这套东西意味着步入晚期。</p>

<p>地富反坏右五类分子，一开始只有地富反坏四类，右是思想不存在等于血统不纯正。
与此相应，好的分子也有几类。军人 干部 工人 农民是革命四类，因为军人的代表是林彪，干部的代表是刘少奇。所以军人吃香了。工人又靠后排。</p>

<p>以阶级斗争来运行国家，需要反面人物也世袭罔替。所以随着时间的推移和又一代人的发展，阶级出身论终于演化成了阶级血统论。<br/>
但是，这套东西的破产也是在所难免。因为黑色阶级总有被消灭或者失去活力失去新鲜感的一天，即无法满足以阶级斗争为冈来建设国家的要求。这样就又需要不停地将红色分子分化出来重新定义成黑类。那么自然整个的基石就开始动摇，毕竟中国人都不傻。</p>

<p>几个对毛主席的评价:</p>

<p>王明是言必称希腊；毛主席是言必称秦始皇<br/>
拒谏爱谄，多疑善变，言而无信，绵里藏针<br/>
毛主席熟读的不是马列著作，而是二十四史。线装书看得太多。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/05/fldk/">风陵渡口</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-05T17:09:00+08:00" pubdate data-updated="true">Mar 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>民族主义还是国际主义？</p>

<p>民族主义同共产国际主义的矛盾。共产国际主义当时的实质就是忠于苏联和斯大林。
而毛是马克思主义中国化的代表人物，延安整风刷清苏联崇拜情结相当不易，也把‘国际主义’代表人物赶下了台。但48年因利益关系，必须争取斯大林的支持，于是刘对铁托匆忙表态，反苏分子也被调离原岗位。</p>

<p>共字上必须有个‘中’，才是名副其实的中共。
马克思共产主义学校&#8211;>中央党校
马列学院->中央研究院</p>

<p>林彪南下后，高成为了‘国际主义者’。忘记了他是毛委任的中共东北局第一书记，而不是斯大林派任的‘新关东总督’。</p>

<p>其实，政治是最现实的。一切从需要出发。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/05/ukgov-notes/">不列颠网站</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-05T14:37:00+08:00" pubdate data-updated="true">Mar 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>一个曾经让我们的国家蒙羞的日不落帝国，即便早已今非昔比，但实际上已经进展到相当现代化的阶段。这从他们最近公布的一组政府网站的制造方式和制造工具上可见一端。</p>

<p>首先，整个网站倡导的是 government as a platform，高度融合了政府为人民服务，政府其实就是一种云。</p>

<p>其次，整个网站不单使用大量的开源工具和软件来构造，网站本身的代码也是开源的，就托管在GitHub上。而被问及为何考虑开源自己的代码时，他们的政府负责人回答是既然是政府平台，
那么它就是大家的，既然是大家的我们希望可以在开发中贡献和分享给每一个人。</p>

<p>整个项目的预算则是1.7百万英镑。这个价格确实不高。我们的孔子学院门户就要3kw人民币，而英国政府的网站造价仅有中国一个官办学院的一半。那是相当之便宜。</p>

<p>以上是整个网站的构造思想，它是开源的、开放的，价格合理的，全民参与和分享的。而在技术实现上也更进一步体现了这种平民化的政府网站哲学。</p>

<p>英国政府并没有买大量的服务器，也没有以国家安全为由自己组建机房。而是选择了Amazon EC2作为存放的主机，存储也是采用的A的S3.这在我们看来是难以想象的。简直有损国家的尊严。身为
一个历史悠久的帝国，怎能连自己的服务器和机房都不具备？实际上，大英帝国政府连email服务器也是租用的。很可能他们用的Gmail和Amazon的mail服务还是免费的。</p>

<p>而在语言和框架方面，也尽显开源和先进的本色。</p>

<pre><code>Javascript uses jQuery, jQuery UI, Chosen, and a variety of other plugins
Most of the application code is written in Ruby, running on a mixture of Rails and Sinatra
router用Scala编写
</code></pre>

<p>数据库当然也是开源的，MongDB起NoSQL的部分，MySQL作为传统的关系型数据库，MaPit做地图数据库。</p>

<p>一个优雅、合理的新时代的网站架构。一句话形容，这才tmd真是先进国家的先进政府网站。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/01/svnlook/">Svnlook与代码统计</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-01T11:48:00+08:00" pubdate data-updated="true">Mar 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>发现svnlook是一个很好的命令，可以帮助获得不少代码版本库中有用的信息。
有了这个东西后，各种统计都会变得有可能。</p>

<p>个人感觉，最有用的当属svn tree 命令</p>

<pre><code>svn tree . --full-paths
</code></pre>

<p>就能打出成排的版本库中的文件和目录。</p>

<p>比如为了获得java文件、jsp、xml的文件列表，可以分别执行下面的命令。</p>

<pre><code>svnlook tree . --full-paths | grep java$ | grep -v tags
svnlook tree . --full-paths | grep jsp$ | grep -v tags
svnlook tree . --full-paths | grep xml$ | grep -v tags
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/02/29/geminniandai/">国民党为什么会失败</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-29T14:57:00+08:00" pubdate data-updated="true">Feb 29<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这是读革命年代有关内容后的一点体会。<br/>
国民党的失败源于军事，经济之垮是受军事的拖累，尤其是东北战局的拖累。国家财政70%用于军费，70%又用于东北。而政治的失败也受军事影响很大。<br/>
国军上手之时，对共军的理解还停留在34年剿匪阶段。当是时，毛泽东领导的中国红军确实已经被国民党‘剿’的差不多了。但是，经过十几年的休养生息，共产党方面的实力有了长足的进步。至开战前，
双方士兵人数在450万对127万。</p>

<p>但是国民党却依然轻敌，这是失败的首要原因。因为轻敌于是没有争取伪军、匪兵甚至日本人来补充自己的战斗力。而中共在彼时由于把自己摆在弱者的位置，因而没有教条主义。轻敌使得全中国都没有什么人考虑过国民党会失败，国民党自己在动员及神经上都不紧绷。</p>

<p>从将领方面来看，林彪、彭德怀、刘伯承、粟裕这样统帅型将领蒋介石身边是很少的。唯一的白崇禧也并不是很受重用。这样的指挥之下，军队表现不如共军也就不是奇怪的。</p>

<p>二者相斗，有点类似于荣誉型vs寡头财富型。后者在打仗时必须考虑经济上是否划算，因此打仗不是最主要的。前者则没有私财，当兵也不是为了吃响，而是有更大的预期。干部没有私产、不用发工资的解放军论打仗能力自然要比蒋匪强。土改之后，中共在农村得到了广泛的拥护，因而有着源源不断的补充。</p>

<p>老蒋在党政工作方面完全缺失。学美军撤出了全部的党代表，但又没有加入替代性的精神组织元素。从而导致周边都是特工。情报、渗透、潜伏这方面大大落后于党。军队的凝聚力也因为没有精神元素，在被俘虏后也会轻易地向解放军投降。
而以上种种，都表明国民党没有全国动员的精神纲领。虽然领导着大半个中国，但是组织和发挥却相当有限。完全不如共产党毫无包袱轻装上阵，有明确的纲领和战略战术。而蒋则在这种消耗中，一步一步走向崩溃。
除了精神方面不明确，经过整风的共产党思想高度统一，是一个团结的集体。而国军，则内部派系林立的多。傅作义、马步芳、李宗仁等地方实力派老蒋并不是很好控制。</p>

<p>此外就是蒋公版的不恨神一样的对手，只怨猪一样的队友。‘此次革命剿匪之失败并非失败于共匪而是失败于俄史，亦非败于俄史而是失败于美马’，‘革命纪律与党德全为李宗仁等扫地殆尽’。</p>

<p>以上这些原因是国民党在大陆军事上失败最本质的原因。而落实到蒋身上，可以理解成年纪大了。抗战胜利时，蒋已经63岁。心中所想所做已不是完全是一个法西斯强人的心态。同时，受美帝影响，颇想改善民生以及拥有美军那样的国家化军队。当然，蓝图里国家是国民党的。
但也学了个四不像，反而失去了基本的动员和组织能力。用毛主席的话讲就是:无量民主，无心独裁。加之骄傲轻敌等因素，最终使得他们失败。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/02/20/the-way-to-link-to-iptv-in-shanghai-through-vlan/">上海电信IPTV的VLAN ID和通过交换机连接两路IPTV</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-20T14:43:00+08:00" pubdate data-updated="true">Feb 20<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>上海电信的IPTV通道和互联网通道是通过ethernet的tag进行区分，然后达到控制各自流量的目的。这个tag打还是不打是有连接路由器的哪一个端口决定的。比如设定端口1和2是iptv的端口，
那么电信的一体猫或者网关就会给在这个口子进入的数据打上tag 51，当从这个口子的数据传给机顶盒时又要去掉tag。因为机顶盒本身是不会处理带tag的数据包的。</p>

<p>但是，我们普通家用的路由器或交换机是不会带有打tag区分vlan的功能。这就是为什么自己家庭的路由器直接连光猫或adsl后就只有iptv能用，或者只有互联网能接通。
要想iptv和互联网都能用，要么改造自己的猫，要么就继续用电信的路由器。</p>

<p>对我来说，是用自己的路由器接电信的上网端口3实现上网，用交换机接电信的iptv端口2实现iptv连接，其实这时候交换机就起到了一种vlan的作用。
这种架构也是一种被逼无奈。因为这边主要使用一体猫，而我的光猫又是放在门外的弱电井中 ，中间通过一根以太网网线连接。而这根网线已经在当两根网线在用，一根连路由器，一根连iptv机顶盒。
所以再装一路高清的话，就没有线路了。这根网线是预埋的，没有第二根线可以连到弱电井。</p>

<p>通过上面的办法，机顶盒可以直接连接自己的交换机，这样就实现了iptv端口2的共享。而这个共享至少到目前为止，上海电信还没有加以限制。如果电信调整了vlan等参数，可能会需要加以变化，但基本的原理
仍然是vlan id。最极端的情况，就是自己买一个千兆路由器，更换成openwrt固件后，自己直接打开vlan进行设置。这样就达到了同采用电信网关一模一样的效果。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/02/17/my-way-to-choose-a-home-router/">家用路由器的选择点滴</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-17T14:26:00+08:00" pubdate data-updated="true">Feb 17<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>因新装光纤宽带后，对老的TP-LINK路由器不满，打算重新购买一台家用路由器，从而对目前的家庭路由器进行了一番了解和实验，于是有了这篇小结。</p>

<p>不满TP的原因是它对bt、emule高并发连接的支持不好，一旦允许的连接数达到几百个以上，那么打开网页等都会受影响。我起初以为这只是硬件能力的问题，毕竟tp的只是低端货，不能指望太多。但到底什么才是家庭路由器中的比较高端的或者能满足这种需求的产品呢？</p>

<p>经过一些了解后，知道路由器的档次区分可以从硬件上来进行。但往往路由器的标的上只会显示ngb这些信息，或者告诉你300M 54M这些，但光知道这些似乎并不足以区分路由器的能力。而真正决定路由器硬件水平的，实质上和电脑很类似。一台电脑硬件的关键标准是cpu和内存，路由器其实也一样，也是cpu、内存、flash的大小决定了路由器的类型。不得不说，这方面的材料是很少的。大部分厂家并不愿意提供切实的路由器数据。我仅仅看到磊科的NR235W提供了自己的芯片和内存信息：
&#8220;内存：64MB <br/>
CPU：美国博康BCM5357处理器   &#8221;
后来，在一个网站上找到了一批路由器的硬件材料，参见http://www.dd-wrt.com/wiki/index.php/Supported_Devices
比较有价值的例如&#8221;TP-LINK WR841N(D) 5.0 AR7240@400 32 4&#8221;， 这个意思是芯片是AR7240,内存是32M，flash是4M。</p>

<p>也更进一步了解到，路由器的芯片厂家主要有两大体系，AR系和BCM系，到底哪个好要具体芯片具体比较。ram的大小决定了系统的带机能力，flash的大小决定了所能安装的固件及软件的尺寸。
其实，比较起来，电信的家庭网关在硬件方面反而厚道的多。比如目前配合光猫常用的两款中兴的H218N和贝尔的RG-200，内存和cpu甚至比磊科的NR235W都略胜一筹，而比起100出头的主流路由器就更好出一倍了。</p>

<pre><code>    CPU：Broadcom 5358（BCM5358）内存：64M falsh: 8M
</code></pre>

<p>至于电信其他的家庭网关，虽然都打着‘低端路由器’的标签，但实际硬件能力却比市场上200左右的路由器都好许多。</p>

<p>但是，电信提供的网络或路由器的软件均不给力。界面难用，功能受阉，管理员帐号通常也很难获取。这就引发了另外一个问题，光有硬件的路由器是什么都做不了的。决定路由器能力的，除了硬件还有至关重要的软件。某种程度上，可能比硬件还要重要。电信路由器弱就弱在软件。</p>

<p>而提起软件，路由器的开源软件普遍起自linksys。目前比较流行的有dd-wrt, openwrt和tt。tt我没装，从dd和open来说，前者更面向普通用户，主要以web管理为主，简单好用。openwrt则主要通过文本配置进行管理，对开发人员更有好些。总而言之，二者的功能均很强大。甚至可以自己利用这两个操作系统配置vlan。而且运行也会很稳定，tplink 841N用这两个固件就会比原厂的稳定的多。</p>

<p>而安装这两个软件能发挥能力到什么地步，则又和硬件中的cpu型号、flash等有关。由于linksys那款是用Broadcom的芯片，所以一些尖端的功能如vlan等都是b系列的支持要好于A系列。所以对于想自己刷机的人来说，目前还是推荐B系列芯片的路由，这样可以打开的功能更多。而flash大小的限制则决定了能够安装的固件规模及以后加载软件的多少。当然是flash越大，能装的也越多。至于内存，那和pc是一样的，越大自然越稳定。</p>

<p>上面这些固件要刷进去，基本有3类方法。第一类就是直接用web里面的上传按钮，当然这个限制也比较大，不是所有的版本都能直接这样刷。要看当前的软件和要刷的软件分别是什么。第二类就是telnet后，通过write的命令把固件写进去。前面两类只需要网线直接连接路由器即可，而第三类就要打开机顶盒，用一种叫做ttl的串口线连接起来，然后在超级终端里进行控制。除以上三种常规刷机方式外，还有一种用于恢复的jtag方式，这个用起来最复杂，而且众多板子的支持情况也不一样。实际上从ttl开始，就有可能要求你用电烙铁把ttl的针子焊上去。</p>

<p>总而言之，研究路由器是一样很有趣的活，在其中长了不少知识。如路由器的结构，芯片的种类，内存和flash的指标的意义。在厂商方面也了解了许多，毕竟先造厂才能有产品。中兴、贝尔、华为等给电信提供路由器应该普遍外包生产为主，多半是贴牌，当然目前的光猫一体猫可能情况有所变化。他们普遍的特点是装了电信比较弱的软件，但有强大的硬件配置。而tp-link 水星 捷迅其实是一家人家，而tplink东西很喜欢不断缩水，比如flash从8m缩到4m之类的。磊科是一家台湾人的公司。</p>

<p>上面说得都是概念和分类上的东西，具体到实物，可以这么分类：
1. 80-120的类似tplink 841N的产品，使用的A系芯片，需要足以flash有没有缩水，新版的缩的比较厉害，这个要具体去看。
2. 200出头的tplink和磊科路由器。硬件普遍还不错，价格稍贵。
3. H218N之类的家庭网关。普遍配置是内存32/64M，flash 8/16M。
4. 千兆路由器，价格在400-1000，如华硕的N16和tplink 2543等。当然tp还有价位在200的千兆路由器。
性价比自然是第3类最高，但一定需要刷机。第2类属于想用的舒心又不想刷机的人。第4类属于这方面比较愿意花米的人。第1类则肯定是普通大众的首选。</p>

<p>关于家用路由器就先写到这里吧。而对光猫和iptv的接法考虑再用一片文章来记录一下。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/29/yang-san-jiao-dao-di-zhi-shi-yao/">杨三角到底指什么</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-29T16:45:00+08:00" pubdate data-updated="true">Jan 29<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>杨国安的三角人力资源模型中，包含员工能力、员工思维、员工治理三部分。
其实可以比对文件目录的读写执行权限，可以转换成员工能力（读，招募公司和团体需要的人，关键在于量体裁衣）、
员工洗脑（写，向员工灌输公司的理念，使得团队的力量可以发挥）、员工执行（最后就是要去做，而这是主要的效果，期间又会发生成本和执行的偏差）。<br/>
以上就是所谓的杨三角，应该是很基本的组织团队的道理。</p>

<p>后面讲了组织间的合作，如果以后我遇到需要协调组织间的情况，再细读吧。
中国管理模式中，部门内部还好说，一旦跨起部门，那就比较麻烦了。当然，这个问题也不是无解，只是确实要具体问题具体处理。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/23/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/21/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/05/21/thymeleafgan-xiang/">thymeleaf感想</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/05/01/truffle-and-solidity/">Truffle And Solidity</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/03/01/cazheng-shu-lue-ji/">CA证书略记</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/28/icechu-tan/">ICE初探</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/02/qu-kuai-lian-gong-ke/">区块链功课</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/技术'>技术 (70)</a></li><li><a href='/blog/categories/生活'>生活 (47)</a></li><li><a href='/blog/categories/车车'>车车 (36)</a></li><li><a href='/blog/categories/java'>Java (26)</a></li><li><a href='/blog/categories/时评'>时评 (25)</a></li><li><a href='/blog/categories/读书笔记'>读书笔记 (23)</a></li><li><a href='/blog/categories/神器'>神器 (23)</a></li><li><a href='/blog/categories/笔记'>笔记 (18)</a></li><li><a href='/blog/categories/ruby'>Ruby (15)</a></li><li><a href='/blog/categories/spring'>Spring (14)</a></li><li><a href='/blog/categories/rails'>Rails (13)</a></li><li><a href='/blog/categories/linux'>Linux (11)</a></li><li><a href='/blog/categories/项目管理'>项目管理 (8)</a></li><li><a href='/blog/categories/软考'>软考 (8)</a></li><li><a href='/blog/categories/nodejs'>Nodejs (6)</a></li><li><a href='/blog/categories/云计算'>云计算 (6)</a></li><li><a href='/blog/categories/nosql数据库'>Nosql数据库 (5)</a></li><li><a href='/blog/categories/crv'>Crv (5)</a></li><li><a href='/blog/categories/heroku'>Heroku (4)</a></li><li><a href='/blog/categories/旅游'>旅游 (4)</a></li><li><a href='/blog/categories/读书列表'>读书列表 (3)</a></li><li><a href='/blog/categories/装机'>装机 (3)</a></li><li><a href='/blog/categories/script'>Script (3)</a></li><li><a href='/blog/categories/期刊'>期刊 (2)</a></li><li><a href='/blog/categories/外刊'>外刊 (2)</a></li><li><a href='/blog/categories/sass'>Sass (2)</a></li><li><a href='/blog/categories/mac'>Mac (2)</a></li><li><a href='/blog/categories/ice'>Ice (1)</a></li><li><a href='/blog/categories/安卓'>安卓 (1)</a></li><li><a href='/blog/categories/sdoc'>Sdoc (1)</a></li><li><a href='/blog/categories/redis'>Redis (1)</a></li><li><a href='/blog/categories/git'>Git (1)</a></li><li><a href='/blog/categories/网络编程'>网络编程 (1)</a></li><li><a href='/blog/categories/测试'>测试 (1)</a></li><li><a href='/blog/categories/svn'>Svn (1)</a></li><li><a href='/blog/categories/安装'>安装 (1)</a></li><li><a href='/blog/categories/区块链'>区块链 (1)</a></li></ul>
</section>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Hegel 2011 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  <a title="Web Statistics" href="http://getclicky.com/66623321"><img alt="Web Statistics" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
  <script src="//static.getclicky.com/js" type="text/javascript"></script>
  <script type="text/javascript">try{ clicky.init(66623321); }catch(e){}</script>
  <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66623321ns.gif" /></p></noscript>

</p>

</footer>
  






Included file 'twitter_sharing.html' not found in _includes directory



</body>
</html>
