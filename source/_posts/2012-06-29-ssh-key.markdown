---
layout: post
title: "ssh-key"
date: 2012-06-29 16:18
comments: true
categories: 
- linux
---

有些东西没用只是因为你的不习惯。一旦你开始用了，可能就会觉得之前的不采用是多么的傻。**ssh-key**登录就是这样一类东西。

一直以来没搞懂每次输入一个密码有那么麻烦的吗？去哪个站点不要登录啊。但用了几次之后，发现加了key后才能彻底发挥出
console快速敏捷的威力。这个比每次输入密码的体验好多了。更重要的，当机器很多很多，比如几十台上百台的时候，那省下的功夫
和能做的事情可就不是一点点了。当然，我并不理解为什么不用保存登录密码的方式，而是兜圈子采用这么一种办法。细想下来可能
和linux系统是多用户的系统这个特性相关。因为实质上的ssh-key登录是另外一个东西。可参见[这篇](http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html)入门的文章。

要想使用公钥登录方式，可以分为两步：

1. 生成公钥私钥对，会存放在`.ssh/id_rsa,  .ssh/id_rsa.pub`中，这是通过命令 `$ssh-keygen`来操作的  
2. 如果已经生成过了，那以后增加其他机器就可以直接执行这步，无需每次都生成公钥私钥。将公钥上传到远程服务器，远程主机会
把他们存放在`.ssh/authorized_keys`中。其实就是每个client增加一条记录。执行的命令是`$ ssh-copy-id user@host` 

弄好以后，发现做起事情来确实快多了。 

Update: 有些机器上需要给出额外的参数` ssh-copy-id -i ~/.ssh/id_rsa.pub git@host`